
## 单体应用

各大互联网公司的应用技术栈分为如下两大流派：

* LAMP(Linux+Apache+MySQL+PHP)

* MVC (Spring + iBatis/Hibernate + Tomcat)


## 微服务
默认以微博为例，参考极客时间《从0开始学微服务》
### 拆分的两种姿势

* 纵向，按业务模块：比如，首页信息流、评论、消息通知、个人主页
* 横向，按照通用性： 比如多个模块都需要显示用户昵称，因此可以独立一个服务。


### 微服务架构，服务调用主要依赖的基本组件

* 服务描述
* 注册中心
* 服务框架
* 服务监控
* 服务追踪
* 服务治理

#### 服务描述
常用的服务描述方式包括RESTful API、 XML配置、以及IDL文件三种。

RESTful API常用于HTTP协议的服务描述，并且常用Wiki或者Swagger来进行管理。

> 是否可以理解为一个词典？

XML配置方式多用作RPC协议的服务描述。通过*.xml配置文件来定义接口名、参数以及返回值类型等。

IDL文件方式通常用作Thrift, gRPC这类跨语言服务调用框架中。

> 在目前玄一的技术框架中，主要还是用http协议的服务描述，而且不是RESTful的那种API接口风格

#### 注册中心
有了服务的接口描述，下一步需要解决的问题就是服务的发布和订阅，就是说你提供了一个服务，如何让外部
想调用你的服务的人知道。这个时候就需要一个类似注册中心的角色，服务提供者将自己提供的服务以及地址登记在
注册中心，服务消费者则从注册中心查询所需要调用的服务的地址，然后发起请求。

#### 服务框架

* 服务通信采用什么协议？四层TCP\UCP还是七层HTTP？还是其他？
* 数据传输采用什么方式？同步还是异步？单链接传输还是多路复用？
* 数据压缩采用什么格式？JSON序列化？Java对象序列化？还是Protobuf?

#### 服务监控

* 指标收集
* 数据处理
* 数据展示

#### 服务追踪

#### 服务治理

* 单机故障
* 单IDC故障
* 依赖服务不可用


### 如何发布和引用服务

### 如何注册和发现服务

#### 注册中心原理
之前常用的开源注册中心是ZooKeeper，现在是Eureka。

